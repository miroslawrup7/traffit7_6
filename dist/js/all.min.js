"use strict";const jobLoc=document.querySelector(".job"),jobLabelLoc=document.querySelector(".job label"),jobInputLoc=document.querySelector(".job input"),jobClearBtnLoc=jobLoc.querySelector(".clear-btn"),cityLoc=document.querySelector(".city"),cityListBtnLoc=document.querySelector(".city .arrow-down"),cityListTitleLoc=document.querySelector(".city .list-title"),citySelectedOptionsLoc=document.querySelector(".city .selected-options"),cityListLoc=document.querySelector(".city .list"),distanceLoc=document.querySelector(".distance"),distanceListBtnLoc=document.querySelector(".distance .arrow-down"),distanceListTitleLoc=document.querySelector(".distance .list-title"),distanceListLoc=document.querySelector(".distance .list"),sectorLoc=document.querySelector(".sector"),sectorListBtnLoc=document.querySelector(".sector .arrow-down"),sectorListTitleLoc=document.querySelector(".sector .list-title"),sectorSelectedOptionsLoc=document.querySelector(".sector .selected-options"),sectorListLoc=document.querySelector(".sector .list"),employmentFormLoc=document.querySelector(".employment-form"),employmentFormListBtnLoc=document.querySelector(".employment-form .arrow-down"),employmentFormListTitleLoc=document.querySelector(".employment-form .list-title"),employmentFormSelectedOptionsLoc=document.querySelector(".employment-form .selected-options"),employmentFormListLoc=document.querySelector(".employment-form .list"),workingHoursLoc=document.querySelector(".working-hours"),workingHoursListBtnLoc=document.querySelector(".working-hours .arrow-down"),workingHoursListTitleLoc=document.querySelector(".working-hours .list-title"),workingHoursSelectedOptionsLoc=document.querySelector(".working-hours .selected-options"),workingHoursListLoc=document.querySelector(".working-hours .list"),languageLoc=document.querySelector(".language"),languageListBtnLoc=document.querySelector(".language .arrow-down"),languageListTitleLoc=document.querySelector(".language .list-title"),languageSelectedOptionsLoc=document.querySelector(".language .selected-options"),languageListLoc=document.querySelector(".language .list"),awardedResultsLoc=document.querySelector(".awarded"),recordsOnPageLoc=document.querySelector(".records-on-page"),pagesSwitchLoc=document.querySelector(".pages"),pagesContainer=document.querySelector(".pages-container");let pageButtonsLoc=document.querySelectorAll(".page");const brancheWrapperLoc=document.querySelector(".sector"),branchesLoc=document.querySelector(".sector ul"),jobFormLoc=document.querySelector(".employment-form ul"),jobTypeLoc=document.querySelector(".working-hours ul"),langLoc=document.querySelector(".language ul"),citiesLoc=document.querySelector(".city ul"),resultsLoc=document.querySelector(".results"),remoteLoc=document.querySelector(".remote"),remoteInputLoc=document.querySelector("#remote"),relocationLoc=document.querySelector(".relocation"),relocationInputLoc=document.querySelector("#relocation"),searchInputLoc=document.querySelector(".job input"),distanceInputsLoc=document.querySelectorAll(".distance input"),distanceTitleLoc=document.querySelector(".distance .list-title"),searchBtn=document.querySelector(".search-btn"),advancedSearchBar=document.querySelector(".wrapper.five"),advancedSearchBtn=document.querySelector(".advanced-search-btn .arrow-down"),advancedContainer=document.querySelector(".advanced-container"),setParentIframeHeight=()=>{const e=document.body.scrollHeight;window.parent.postMessage(e,"https://miroslawrup7.github.io")};jobLoc.addEventListener("click",(e=>{jobLabelLoc.classList.add("mini"),jobInputLoc.classList.add("active"),jobClearBtnLoc.style.opacity="0.5",jobClearBtnLoc.style.display="flex"})),jobInputLoc.addEventListener("blur",(e=>{e.target.value||(jobLabelLoc.classList.remove("mini"),jobInputLoc.classList.remove("active"),jobClearBtnLoc.style.opacity="0",jobClearBtnLoc.style.display="none")})),jobClearBtnLoc.addEventListener("click",(e=>{e.stopPropagation(),jobInputLoc.value="",jobLabelLoc.classList.remove("mini"),jobInputLoc.classList.remove("active"),jobClearBtnLoc.style.opacity="0",jobClearBtnLoc.style.display="none",searchBtn.click()}));const removePaddingBottomToFilterList=e=>{e.closest(".element").style.paddingBottom="",e.closest(".element").style.boxShadow=""},addPaddingBottomToFilterList=t=>{if(""===t.closest(".element").style.paddingBottom){const r=Array.from(e.querySelector(".list").querySelectorAll("ul")).reduce(((e,t)=>e+t.querySelectorAll("li").length),0),o=getComputedStyle(document.querySelector(".list ul li")),i=parseInt(o.marginBottom.split(0,-2)),n=r*(i+document.querySelector(".list ul li").offsetHeight)+document.querySelector(".list-title").offsetHeight+2*i,a=n>400?400:n;t.closest(".element").style.paddingBottom="15px",t.closest(".element").style.boxShadow="0px 0px 3px rgba(0,0,0,0.1)",t.closest(".element").style.height=a+"px"}else removePaddingBottomToFilterList(t)},dropDownListArray=[cityLoc,distanceLoc,sectorLoc,employmentFormLoc,workingHoursLoc,languageLoc];dropDownListArray.forEach((e=>{e.querySelector(".list-title").addEventListener("click",(()=>{e.querySelector(".list").classList.toggle("expand"),e.querySelector(".arrow-down").classList.toggle("rotate180"),addPaddingBottomToFilterList(e.querySelector(".list-title"))}))})),dropDownListArray.forEach((e=>{e.addEventListener("mouseleave",(()=>{e.querySelector(".list").classList.remove("expand"),e.querySelector(".arrow-down").classList.remove("rotate180"),removePaddingBottomToFilterList(e.querySelector(".list-title"))}))})),document.addEventListener("touchstart",(function(e){e.target;dropDownListArray.some((t=>{let r=t.querySelector(".expand");return t.contains(r)&&!t.contains(e.target)}))&&dropDownListArray.forEach((e=>{e.querySelector(".list").classList.remove("expand"),e.querySelector(".arrow-down").classList.remove("rotate180"),removePaddingBottomToFilterList(e.querySelector(".list-title"))}))}));let filteredRecordsArray_11,apiNumber,filterConfigData={},apiPage=1,rawAPIArray=[],allRecordsArray=[],recordsNumber=0,firstRecordNumber=0,recordsOnPage=20,filtersON=!1,filterBranchesList=[],filterJobFormList=[],filterJobTypeList=[],filterLangList=[],filterCountriesList={};distanceInputsLoc.forEach((e=>{e.addEventListener("change",(()=>{distanceTitleLoc.innerText=`+${Number(e.value)} km`,distanceTitleLoc.dataset.distance=Number(e.value),searchBtn.click()}))})),recordsOnPageLoc.value=recordsOnPage;const filterListLocArray=[cityLoc,sectorLoc,employmentFormLoc,workingHoursLoc,languageLoc];let selectedOptionsInFilterArray=[[],[],[],[],[],[]];const setClearBtn=()=>{filterListLocArray.forEach(((e,t)=>{const r=e.querySelector(".clear-btn"),o=e.querySelector(".filters-quantity"),i=e.querySelector(".selected-options"),n=e.querySelector(".list-title");r.addEventListener("mouseenter",(()=>{0!==selectedOptionsInFilterArray[t].length&&(o.style.opacity="0",r.style.opacity="1")})),r.addEventListener("mouseleave",(()=>{0!==selectedOptionsInFilterArray[t].length&&(o.style.opacity="1",r.style.opacity="0")})),r.addEventListener("click",(()=>{0!==selectedOptionsInFilterArray[t].length&&(selectedOptionsInFilterArray[t]=[],r.style.opacity="0",e.querySelectorAll("input").forEach((e=>{e.checked=!1})),i.innerText="",n.classList.remove("mini"),o.style.opacity="0",searchBtn.click())}))}))};filterListLocArray.forEach(((e,t)=>{const r=e.querySelector(".clear-btn"),o=e.querySelector(".filters-quantity"),i=e.querySelector(".selected-options"),n=e.querySelector(".list-title");r.addEventListener("mouseenter",(()=>{0!==selectedOptionsInFilterArray[t].length&&(o.style.opacity="0",r.style.opacity="1")})),r.addEventListener("mouseleave",(()=>{0!==selectedOptionsInFilterArray[t].length&&(o.style.opacity="1",r.style.opacity="0")})),r.addEventListener("click",(()=>{0!==selectedOptionsInFilterArray[t].length&&(selectedOptionsInFilterArray[t]=[],r.style.opacity="0",e.querySelectorAll("input").forEach((e=>{e.checked=!1})),i.innerText="",n.classList.remove("mini"),o.style.opacity="0",searchBtn.click())}))}));const actionAfterFilterInputChange=e=>{const t=e.target.closest(".drop-down-container"),r=t.querySelector(".filters-quantity"),o=t.querySelector(".list-title"),i=t.querySelector(".selected-options"),n=filterListLocArray.indexOf(t);if(e.target.checked)selectedOptionsInFilterArray[n].push(e.target.value);else{const t=selectedOptionsInFilterArray[n].indexOf(e.target.value);selectedOptionsInFilterArray[n].splice(t,1)}selectedOptionsInFilterArray[n],0!==selectedOptionsInFilterArray[n].length?(o.classList.add("mini"),r.style.opacity="1",r.innerText=selectedOptionsInFilterArray[n].length):(o.classList.remove("mini"),r.style.opacity="0"),i.innerText=selectedOptionsInFilterArray[n].join(", "),searchBtn.click()},addListenerToFilterListsElements=()=>{document.querySelectorAll(".city ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".sector ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".employment-form ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".working-hours ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".language ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)}))},createRecordBoxes=(e,t,r)=>{resultsLoc.replaceChildren();for(let o=t;o<r;o++)if(e[o]){let t="",r="";0!==Object.keys(filterConfigData).length&&filterConfigData.recruitmentType_colorOnly.length?(-1!==filterConfigData.recruitmentType_colorOnly.indexOf("PT")&&"PT"===e[o].recruitmentType&&(t="pt-border",r="pt-text"),-1!==filterConfigData.recruitmentType_colorOnly.indexOf("RS")&&"RS"===e[o].recruitmentType&&(t="rs-border",r="rs-text"),-1!==filterConfigData.recruitmentType_colorOnly.indexOf("WEW")&&"WEW"===e[o].recruitmentType&&(t="wew-border",r="wew-text")):("PT"===e[o].recruitmentType&&(t="pt-border",r="pt-text"),"RS"===e[o].recruitmentType&&(t="rs-border",r="rs-text"),"WEW"===e[o].recruitmentType&&(t="wew-border",r="wew-text"));let i="";e[o].jobForm&&e[o].jobForm.forEach((function(e){i=i+"<p>"+e+"</p>"})),resultsLoc.insertAdjacentHTML("beforeend",`<a href="${e[o].url}" target="_blank">\n                <div class="result ${t}">\n                    <div class="top">\n                        <div class="lang"><p>${e[o].lang}</p></div>\n                        <div class="branche-name">\n                            <div class="branche">${e[o].branche?e[o].branche:""}</div>\n                            <div class="name ${r}">${e[o].name}</div>\n                        </div>\n                    </div>\n\n                    <div class="bottom">\n                        <div class="city-container">\n                            <div class="city"><img src="./img/location_dot.svg">${e[o].city}</div>\n                        </div>\n                        <div class="details-container">\n                            ${e[o].jobType?"<div class='jobtype'>"+e[o].jobType+"</div>":""}\n                            ${e[o].visibleRate&&e[o].salaryFrom&&e[o].salaryTo?"<div class='salary'>"+e[o].salaryFrom+" - "+e[o].salaryTo+"</div>":""}\n                            ${e[o].remote?"<div class='remote'>zdalna</div>":""}\n                            ${e[o].relocation?"<div class='relocation'>relocation</div>":""}\n                            <div class="employmentform">${i}</div>\n                        </div>\n                    </div>\n                   \n                </div>\n            </a>`)}setParentIframeHeight()},setPages=e=>{if(pagesQuantityCalc=Math.ceil(e/recordsOnPage),pagesQuantityCalc>maxPageBtns){pagesSwitchLoc.replaceChildren();for(let e=1;e<=maxPageBtns;e++)1===e?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${e}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${e}</div>`);pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next active"><img src="./img/chevron-right.svg" alt="" /></div>'),document.querySelector(".next").addEventListener("click",(()=>{moveNextPagesBtns()}))}else{pagesSwitchLoc.replaceChildren();for(let e=1;e<=pagesQuantityCalc;e++)1===e?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${e}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${e}</div>`);pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next"><img src="" alt="" /></div>')}pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev"><img src="" alt="" /></div>'),pageButtonsLoc=document.querySelectorAll(".page"),pageButtonsLoc.forEach((e=>{e.addEventListener("click",(e=>{changePage(e.target)}))}))},createFilteredRecordsArray=()=>{const e=branchesLoc.querySelectorAll("li input"),t=jobFormLoc.querySelectorAll("li input"),r=jobTypeLoc.querySelectorAll("li input"),o=langLoc.querySelectorAll("li input"),i=citiesLoc.querySelectorAll("li input");let n=allRecordsArray,a=[];a=0!==Object.keys(filterConfigData).length&&filterConfigData.branche_filter.length?filterConfigData.branche_filter:Array.from(e).filter((function(e){return e.checked})).map((function(e){return e.value}));let c=[];0!==a.length?n.forEach(((e,t)=>{let r=!1;a.forEach((t=>{e.branche===t&&(r=!0)})),r&&c.push(e)})):c=n;let l=[];l=Array.from(t).filter((function(e){return e.checked})).map((function(e){return e.value}));let s=[];0!==l.length?c.forEach(((e,t)=>{if(e.jobForm){let t=!1;l.forEach((r=>{-1!==e.jobForm.indexOf(r)&&(t=!0)})),t&&s.push(e)}})):s=c;let d=Array.from(r).filter((function(e){return e.checked})).map((function(e){return e.value})),u=[];0!==d.length?s.forEach(((e,t)=>{let r=!1;d.forEach((t=>{e.jobType===t&&(r=!0)})),r&&u.push(e)})):u=s;let g=[];g=0!==Object.keys(filterConfigData).length&&filterConfigData.language_filter.length?filterConfigData.language_filter:Array.from(o).filter((function(e){return e.checked})).map((function(e){return e.value}));let f=[];0!==g.length?u.forEach(((e,t)=>{let r=!1;g.forEach((t=>{e.lang===t&&(r=!0)})),r&&f.push(e)})):f=u;let p=[],y=[];0!==Object.keys(filterConfigData).length&&filterConfigData.location_country_filter.length?(p=filterConfigData.location_country_filter,f.forEach((e=>{let t=!1;p.forEach((r=>{e.country===r&&(t=!0)})),t&&y.push(e)}))):y=f;let m=y,L=[];0!==Object.keys(filterConfigData).length&&filterConfigData.location_city_filter.length?(L=filterConfigData.location_city_filter,cityLoc.style.display="none"):L=Array.from(i).filter((function(e){if(e.value)return e.checked})).map((function(e){if(e.value)return e.value}));let h=[];if(0!==Object.keys(filterConfigData).length&&null!==filterConfigData.location_distance&&(distanceLoc.style.display="none"),L.length){let e,t,r,o,i,n,a=parseInt(distanceTitleLoc.dataset.distance);L.forEach((c=>{m.forEach((l=>{c===l.city&&(e=l.lati,t=l.longi,0!==Object.keys(filterConfigData).length&&null!==filterConfigData.location_distance&&(a=filterConfigData.location_distance,distanceLoc.style.display="none"),r=e-.009044*a,o=e+.009044*a,i=t-.0089831*a/Math.cos(e*Math.PI/180),n=t+.0089831*a/Math.cos(e*Math.PI/180))})),m.forEach((e=>{e.lati<=o&&e.lati>=r&&e.longi<=n&&e.longi>=i&&h.push(e)}))}))}else h=m;let v=[];remoteInputLoc.checked||filterConfigData.remote_filter?h.forEach((e=>{let t=!1;e.remote&&(t=!0),t&&v.push(e)})):v=h;let b=[];relocationInputLoc.checked?v.forEach((e=>{let t=!1;e.relocation&&(t=!0),t&&b.push(e)})):b=v;let S=[],A=searchInputLoc.value;A?b.forEach((e=>{let t,r=!1;e.description.forEach((function(e){e.value&&"geolocation"!==e.field_id&&(t=e.value.toLowerCase().search(A.toLowerCase()),-1!==t&&(r=!0))})),t=e.name.toLowerCase().search(A.toLowerCase()),-1!==t&&(r=!0),r&&S.push(e)})):S=b,filteredRecordsArray_11=[];let C=[];0!==Object.keys(filterConfigData).length&&filterConfigData.recruitmentType_filter.length?(C=filterConfigData.recruitmentType_filter,S.forEach((e=>{let t=!1;C.forEach((r=>{e.recruitmentType===r&&(t=!0)})),t&&filteredRecordsArray_11.push(e)}))):filteredRecordsArray_11=S,recordsNumber=filteredRecordsArray_11.length,createRecordBoxes(filteredRecordsArray_11,0,recordsOnPage),setPages(recordsNumber),filtersON=!0},pagesContainerStart=()=>{pagesContainer.classList.add("active")},dropDownBtnStart=()=>{dropDownLoc.addEventListener("click",showHideFilters),dropDownLoc.classList.add("active")},createFilterLists=e=>{if(e&&(e.relocation_visible||relocationLoc.classList.add("unactive"),e.language_visible||languageLoc.classList.add("unactive"),e.remote_visible||remoteLoc.classList.add("unactive"),e.location_visible||(cityLoc.classList.add("unactive"),distanceLoc.classList.add("unactive")),e.branche_visible||sectorLoc.classList.add("unactive")),filterBranchesList.length>0&&(filterBranchesList.sort((function(e,t){return e.localeCompare(t)})),filterBranchesList.forEach((function(e){branchesLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="${e}" name="${e}" value="${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="${e}">${e}</label>\n                </div>\n            </li>`)}))),filterJobFormList.length>0&&(filterJobFormList.sort((function(e,t){return e.localeCompare(t)})),filterJobFormList.forEach((function(e){jobFormLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="${e}" name="${e}" value="${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="${e}">${e}</label>\n                </div>\n            </li>`)}))),filterJobTypeList.length>0&&(filterJobTypeList.sort((function(e,t){return e.localeCompare(t)})),filterJobTypeList.forEach((function(e){jobTypeLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="${e}" name="${e}" value="${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="${e}">${e}</label>\n                </div>\n            </li>`)}))),filterLangList.length>0&&(filterLangList.sort((function(e,t){return e.localeCompare(t)})),filterLangList.forEach((function(e){langLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="${e}" name="${e}" value="${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="${e}">${e}</label>\n                </div>\n            </li>`)}))),Object.keys(filterCountriesList).length>0){function t(e,t){return e.city.localeCompare(t.city)}for(let i in filterCountriesList)filterCountriesList[i].sort(t);filterCountriesList=Object.keys(filterCountriesList).sort().reduce(((e,t)=>(e[t]=filterCountriesList[t],e)),{});let r=[];for(let n in filterCountriesList)r=r.concat(filterCountriesList[n]);let o=[];r.forEach((e=>{o.push(e.city)})),o.sort((function(e,t){return e.localeCompare(t)})),o.forEach((function(e){citiesLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="${e}" name="${e}" value="${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="${e}">${e}</label>\n                </div>\n            </li>`)}))}};let globActivePageNo;const changePage=e=>{pageButtonsLoc.forEach((e=>{e.classList.remove("active")})),e.classList.add("active");let t=recordsOnPage*parseInt(e.innerText)-recordsOnPage,r=recordsOnPage*parseInt(e.innerText);createRecordBoxes(filtersON?filteredRecordsArray_11:allRecordsArray,t,r),globActivePageNo=parseInt(e.innerText)},movePrevPagesBtns=()=>{let e,t=parseInt(Array.from(document.querySelectorAll(".page")).shift().innerText),r=parseInt(Array.from(document.querySelectorAll(".page")).pop().innerText);if(e=document.querySelector(".page.active"),e&&(e=parseInt(e.innerText)),t>1){pagesSwitchLoc.replaceChildren();for(let o=t-1;o<=r-1;o++)e||(e=globActivePageNo),e&&o===e?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${o}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${o}</div>`);if(r<pagesQuantityCalc+1){pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next active"><img src="./img/chevron-right.svg" alt="" /></div>'),document.querySelector(".next").addEventListener("click",(()=>{moveNextPagesBtns()}))}else pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next"><img src="" alt="" /></div>');if(t>2){pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev active"><img src="./img/chevron-left.svg" alt="" /></div>'),document.querySelector(".prev").addEventListener("click",(()=>{movePrevPagesBtns()}))}else pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev"><img src="" alt="" /></div>');pageButtonsLoc=document.querySelectorAll(".page"),pageButtonsLoc.forEach((e=>{e.addEventListener("click",(e=>{changePage(e.target)}))}))}},moveNextPagesBtns=()=>{let e,t=parseInt(Array.from(document.querySelectorAll(".page")).shift().innerText),r=parseInt(Array.from(document.querySelectorAll(".page")).pop().innerText);if(e=document.querySelector(".page.active"),e&&(e=parseInt(e.innerText),globActivePageNo=e),r<pagesQuantityCalc){pagesSwitchLoc.replaceChildren();for(let o=t+1;o<=r+1;o++)e||(e=globActivePageNo),e&&o===e?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${o}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${o}</div>`);if(r<pagesQuantityCalc-1){pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next active"><img src="./img/chevron-right.svg" alt="" /></div>'),document.querySelector(".next").addEventListener("click",(()=>{moveNextPagesBtns()}))}else pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next"><img src="" alt="" /></div>');if(t>0){pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev active"><img src="./img/chevron-left.svg" alt="" /></div>'),document.querySelector(".prev").addEventListener("click",(()=>{movePrevPagesBtns()}))}else pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev"><img src="" alt="" /></div>');pageButtonsLoc=document.querySelectorAll(".page"),pageButtonsLoc.forEach((e=>{e.addEventListener("click",(e=>{changePage(e.target)}))}))}};function getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}let pagesQuantityCalc,maxPageBtns;const setPagesBtnQuantity=()=>{let e;getWidth()<500&&(e=3),getWidth()>=500&&getWidth()<650&&(e=3),getWidth()>=650&&getWidth()<750&&(e=4),getWidth()>=750&&getWidth()<950&&(e=7),getWidth()>=950&&getWidth()<1200&&(e=12),getWidth()>=1200&&(e=15),e!==maxPageBtns&&(maxPageBtns=e,setPages(recordsNumber))};window.addEventListener("resize",(()=>{setPagesBtnQuantity()})),setPagesBtnQuantity();const filterAwarded=(e,t,r)=>{for(let o=t.length-1;o>=0;o--){let i=!1;e.forEach((e=>{t[o][r]===e&&(i=!0)})),i||t.splice(o,1)}},createAwardedRecordBoxes=(e,t)=>{awardedResultsLoc.replaceChildren();let r=e.filter((e=>e.awarded));if(r.length>0){t&&(t.remote_filter&&(r=r.filter((e=>e.remote))),t.language_filter.length>0&&filterAwarded(t.language_filter,r,"lang"),t.branche_filter.length>0&&filterAwarded(t.branche_filter,r,"branche"),t.location_country_filter.length>0&&filterAwarded(t.location_country_filter,r,"country"),t.location_city_filter.length>0&&filterAwarded(t.location_city_filter,r,"city"),t.recruitmentType_filter.length>0&&filterAwarded(t.recruitmentType_filter,r,"recruitmentType"));for(let e=firstRecordNumber;e<10;e++)if(r[e]){let t="",o="";"PT"===r[e].recruitmentType&&(t="pt-border",o="pt-text"),"RS"===r[e].recruitmentType&&(t="rs-border",o="rs-text"),"WEW"===r[e].recruitmentType&&(t="wew-border",o="wew-text");let i="";r[e].jobForm&&r[e].jobForm.forEach((function(e){i=i+"<p>"+e+"</p>"})),awardedResultsLoc.insertAdjacentHTML("beforeend",`<a href="${r[e].url}" target="_blank"><div class="result ${t}">\n                <div class="top">\n                \n                        <div class="lang">\n                            <p>${r[e].lang}</p>\n                        </div>\n                        <div class="branche-name">\n                            <div class="branche">${r[e].branche?r[e].branche:""}</div>\n                            <div class="name ${o}">${r[e].name}</div>\n                        </div>\n                    \n                </div>\n\n                <div class="bottom">\n                    <div class="city-container">\n                        <div class="city"><img src="./img/location_dot.svg">${r[e].city}</div></div>\n                        <div class="details-container">\n                        ${r[e].remote?"<div class='remote'>zdalna</div>":""}\n                        ${r[e].relocation?"<div class='relocation'>relocation</div>":""}\n                        ${r[e].jobType?"<div class='jobtype'>"+r[e].jobType+"</div>":""}\n                        ${r[e].visibleRate&&r[e].salaryFrom&&r[e].salaryTo?"<div class='salary'>"+r[e].salaryFrom+" - "+r[e].salaryTo+"</div>":""}\n                        <div class="employmentform">${i}</div>\n                        </div>\n                    \n                </div>\n\n                <div class="ribbon-wrap">\n                        <div class="ribbon">\n                                <img src="./img/star.svg" alt="">\n                                <img src="./img/star.svg" alt="">\n                                <img src="./img/star.svg" alt="">\n                            </div>\n                        </div>\n                </div>\n\n            </div></a>`)}}else awardedResultsLoc.style.margin="0"},createDataForFilters=(e,t,r,o,i,n,a,c,l,s,d)=>{-1===filterBranchesList.indexOf(e)&&void 0!==e&&(0!==Object.keys(filterConfigData).length&&filterConfigData.branche_filter.length?-1!==filterConfigData.branche_filter.indexOf(e)&&filterBranchesList.push(e):filterBranchesList.push(e)),t&&t.forEach((e=>{-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)})),-1===filterJobTypeList.indexOf(r)&&void 0!==r&&filterJobTypeList.push(r),-1===filterLangList.indexOf(o)&&(0!==Object.keys(filterConfigData).length&&filterConfigData.language_filter.length?-1!==filterConfigData.language_filter.indexOf(o)&&filterLangList.push(o):filterLangList.push(o)),0!==Object.keys(filterConfigData).length?(filterCountriesList[c]||(filterCountriesList[c]=[]),filterConfigData.location_city_filter.length?-1!==filterConfigData.location_city_filter.indexOf(l)&&filterCountriesList[c].push({city:l,lati:s,longi:d}):filterConfigData.location_country_filter.length?-1!==filterConfigData.location_country_filter.indexOf(c)&&filterCountriesList[c].push({city:l,lati:s,longi:d}):-1===filterCountriesList[c].findIndex((e=>e.city===l))&&filterCountriesList[c].push({city:l,lati:s,longi:d})):(filterCountriesList[c]||(filterCountriesList[c]=[]),-1===filterCountriesList[c].findIndex((e=>e.city===l))&&filterCountriesList[c].push({city:l,lati:s,longi:d}))},reworkData=e=>{e.forEach((e=>{let t;var r,o,i,n,a,c,l,s;e.options.job_location&&(t=JSON.parse(e.options.job_location)),allRecordsArray.push({url:e.url,name:e.advert.name,branche:e.options.branches,lang:e.advert.language,jobType:e.options.job_type,visibleRate:parseInt(e.options._Widoczna_stawka),salaryFrom:parseInt(e.options._spodziewane_wynagrodzenie_od),salaryTo:parseInt(e.options._spodziewane_wynagrodzenie_do),remote:e.options.remote,relocation:e.options._relokacja,recruitmentType:e.options._rekrutacja_rodzaj,jobForm:e.options._forma_zatrudnienia,country:t.country,city:t.locality,lati:parseFloat(t.latitude),longi:parseFloat(t.longitude),description:e.advert.values,awarded:e.awarded}),r=e.options.branches,o=e.options._forma_zatrudnienia,i=e.options.job_type,n=e.advert.language,parseInt(e.options._Widoczna_stawka),parseInt(e.options._spodziewane_wynagrodzenie_od),parseInt(e.options._spodziewane_wynagrodzenie_do),a=t.country,c=t.locality,l=parseFloat(t.latitude),s=parseFloat(t.longitude),-1===filterBranchesList.indexOf(r)&&void 0!==r&&(0!==Object.keys(filterConfigData).length&&filterConfigData.branche_filter.length?-1!==filterConfigData.branche_filter.indexOf(r)&&filterBranchesList.push(r):filterBranchesList.push(r)),o&&o.forEach((e=>{-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)})),-1===filterJobTypeList.indexOf(i)&&void 0!==i&&filterJobTypeList.push(i),-1===filterLangList.indexOf(n)&&(0!==Object.keys(filterConfigData).length&&filterConfigData.language_filter.length?-1!==filterConfigData.language_filter.indexOf(n)&&filterLangList.push(n):filterLangList.push(n)),0!==Object.keys(filterConfigData).length?(filterCountriesList[a]||(filterCountriesList[a]=[]),filterConfigData.location_city_filter.length?-1!==filterConfigData.location_city_filter.indexOf(c)&&filterCountriesList[a].push({city:c,lati:l,longi:s}):filterConfigData.location_country_filter.length?-1!==filterConfigData.location_country_filter.indexOf(a)&&filterCountriesList[a].push({city:c,lati:l,longi:s}):-1===filterCountriesList[a].findIndex((e=>e.city===c))&&filterCountriesList[a].push({city:c,lati:l,longi:s})):(filterCountriesList[a]||(filterCountriesList[a]=[]),-1===filterCountriesList[a].findIndex((e=>e.city===c))&&filterCountriesList[a].push({city:c,lati:l,longi:s}))}))},getAPI=e=>fetch("https://grupaprogres.traffit.com/public/job_posts/published",{mode:"cors",headers:{"Content-Type":"application/json","X-Request-Page-Size":"100","X-Request-Current-Page":e,"X-Request-Sort":'{"sort_by": "id", "direction": "ASC"}'}}),getAPI_2=e=>fetch("https://rsgrupaprogres.traffit.com/public/job_posts/published",{mode:"cors",headers:{"Content-Type":"application/json","X-Request-Page-Size":"100","X-Request-Current-Page":e,"X-Request-Sort":'{"sort_by": "id", "direction": "ASC"}'}}),loopOnAPI=(e,t)=>{e.length>0&&1===apiNumber?(rawAPIArray=rawAPIArray.concat(e),apiPage++,createRecordsObjFromAPI(apiPage,t)):0===e.length&&1===apiNumber?(apiPage=1,createRecordsObjFromAPI_2(apiPage,t)):e.length>0&&2===apiNumber?(rawAPIArray=rawAPIArray.concat(e),apiPage++,createRecordsObjFromAPI_2(apiPage,t)):(reworkData(rawAPIArray),recordsNumber=rawAPIArray.length,createAwardedRecordBoxes(allRecordsArray,t),setPages(recordsNumber),createFilterLists(t),document.querySelectorAll(".city ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".sector ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".employment-form ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".working-hours ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),document.querySelectorAll(".language ul input").forEach((e=>{e.addEventListener("change",actionAfterFilterInputChange)})),createFilteredRecordsArray(),distanceInputsLoc.forEach((e=>{e.checked=!1})),jobInputLoc.value="")};async function createRecordsObjFromAPI(e,t){apiNumber=1;const r=await getAPI(e),o=await r.json();loopOnAPI(o,t)}async function createRecordsObjFromAPI_2(e,t){apiNumber=2;const r=await getAPI_2(e),o=await r.json();loopOnAPI(o,t)}const getConfigFilter=()=>fetch("./config/config.json");async function readConfigFilter(){try{const e=await fetch("./config/config.json");filterConfigData=await e.json(),createRecordsObjFromAPI(apiPage,filterConfigData)}catch(e){console.error(e),createRecordsObjFromAPI(apiPage)}}readConfigFilter(),recordsOnPageLoc.addEventListener("change",(e=>{recordsOnPage=parseInt(e.target.value),createRecordBoxes(filtersON?filteredRecordsArray_11:allRecordsArray,0,recordsOnPage),setPages(recordsNumber)})),searchBtn.addEventListener("click",createFilteredRecordsArray),advancedSearchBar.addEventListener("click",(()=>{advancedContainer.classList.toggle("showed"),advancedSearchBtn.classList.toggle("rotate180"),setParentIframeHeight()}));const clearAllFiltersLoc=document.querySelector(".clear-all-filters");clearAllFiltersLoc.addEventListener("click",(()=>{filterListLocArray.forEach(((e,t)=>{const r=e.querySelector(".clear-btn"),o=e.querySelector(".filters-quantity"),i=e.querySelector(".selected-options"),n=e.querySelector(".list-title");selectedOptionsInFilterArray[t]=[],r.style.opacity="0",e.querySelectorAll("input").forEach((e=>{e.checked=!1})),i.innerText="",n.classList.remove("mini"),o.style.opacity="0"})),jobInputLoc.value="",jobLabelLoc.classList.remove("mini"),jobInputLoc.classList.remove("active"),jobClearBtnLoc.style.opacity="0",jobClearBtnLoc.style.display="none",distanceLoc.querySelectorAll("input").forEach((e=>{e.checked=!1})),distanceListTitleLoc.innerText="+0 km",createFilteredRecordsArray()})),jobInputLoc.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),searchBtn.click())})),jobInputLoc.addEventListener("blur",(()=>{""!==jobInputLoc.value&&searchBtn.click()})),jobInputLoc.addEventListener("input",(()=>{""===jobInputLoc.value&&searchBtn.click()})),remoteInputLoc.addEventListener("change",(()=>{searchBtn.click()})),relocationInputLoc.addEventListener("change",(()=>{searchBtn.click()}));
//# sourceMappingURL=all.min.js.map
